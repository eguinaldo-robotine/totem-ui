# Cursor Rules para Totem UI

## Contexto do Projeto
Este é um projeto de interface gráfica usando Python, Qt 6.10 e QML.

## Linguagens e Frameworks
- **Python 3.10+**: Linguagem principal
- **PyQt6 6.10+**: Bindings Python para Qt6
- **QML**: Linguagem declarativa para interfaces
- **pyproject.toml**: Gerenciamento de dependências e configuração

## Estrutura do Projeto (Arquitetura em Camadas)

### Python (src/)
- `models/`: Entidades de dados (herdam de BaseModel)
- `repository/`: Acesso a dados (implementam BaseRepository)
- `service/`: Lógica de negócio
- `controller/`: Conexão QML ↔ Lógica (herdam de QObject)

### QML (qml/)
- `components/`: Componentes reutilizáveis
- `pages/`: Páginas principais da aplicação
- `dialogs/`: Diálogos e modais
- `styles/`: Temas e estilos (Theme.qml)

## Convenções de Código

### Python
- Use type hints quando possível
- Siga PEP 8 com linha de 100 caracteres (configurado no black)
- Use docstrings em português para funções e classes públicas
- Prefira f-strings para formatação de strings
- Use pathlib.Path para manipulação de caminhos

### QML
- Use indentação de 4 espaços
- Organize imports no topo do arquivo
- Use IDs descritivos para componentes
- Prefira Layouts (ColumnLayout, RowLayout) sobre anchors quando possível
- Mantenha componentes reutilizáveis em arquivos separados

## Boas Práticas

### Qt/QML
- Sempre verifique se arquivos QML existem antes de carregá-los
- Use QGuiApplication para aplicações sem widgets
- Prefira caminhos absolutos ou relativos ao executável para recursos QML
- Trate erros de carregamento do QML adequadamente

### Python
- Use context managers (with) para recursos
- Trate exceções específicas, não genéricas
- Valide entradas de usuário
- Use logging em vez de print para depuração em produção

## Dependências do Sistema
- O projeto requer dependências do sistema (libxcb-cursor0, etc.)
- Sempre verifique se as dependências estão instaladas antes de executar
- Use o script setup_env.sh para instalação automática

## Comandos Úteis
- `python src/main.py`: Executa a aplicação
- `./setup_env.sh`: Configura ambiente e instala dependências
- `pip install -e .`: Instala o projeto em modo desenvolvimento

## Arquivos Importantes
- `src/main.py`: Ponto de entrada da aplicação
- `src/controller/app_controller.py`: Controller principal
- `qml/pages/main.qml`: Página principal QML
- `qml/styles/Theme.qml`: Tema e estilos
- `pyproject.toml`: Configuração e dependências do projeto
- `setup_env.sh`: Script de configuração do ambiente

## Padrões da Arquitetura

### Estrutura de Pacotes
- Usa pacotes Python tradicionais com `__init__.py`
- Imports absolutos: `from src.models.app_state import AppState`
- Cada diretório tem seu `__init__.py`

### Models
- Herdam de `BaseModel`
- Usam `@dataclass` quando possível
- Implementam `to_dict()` e `from_dict()`

### Repository
- Herdam de `BaseRepository[T]`
- Implementam CRUD básico (get_by_id, get_all, save, delete)
- Podem ser substituídos sem afetar outras camadas

### Service
- Recebem repositories via construtor (injeção de dependência)
- Contêm lógica de negócio
- Não conhecem detalhes de implementação

### Controller
- Herdam de `QObject`
- Usam `@pyqtProperty` para propriedades QML
- Usam `@pyqtSlot` para métodos chamados do QML
- Emitem signals quando necessário

## Notas
- Sempre responda em português
- Use comentários em português no código
- Mantenha a consistência com a estrutura existente
- Ao adicionar novas funcionalidades, considere a arquitetura Qt/QML

